{"version":3,"file":"index.js","mappings":"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","sources":["webpack://featured-professor/./src/index.scss","webpack://featured-professor/external window \"React\"","webpack://featured-professor/external window [\"wp\",\"data\"]","webpack://featured-professor/external window [\"wp\",\"element\"]","webpack://featured-professor/webpack/bootstrap","webpack://featured-professor/webpack/runtime/compat get default export","webpack://featured-professor/webpack/runtime/define property getters","webpack://featured-professor/webpack/runtime/hasOwnProperty shorthand","webpack://featured-professor/webpack/runtime/make namespace object","webpack://featured-professor/./src/index.js"],"sourcesContent":["// extracted by mini-css-extract-plugin\nexport {};","module.exports = window[\"React\"];","module.exports = window[\"wp\"][\"data\"];","module.exports = window[\"wp\"][\"element\"];","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = function(module) {\n\tvar getter = module && module.__esModule ?\n\t\tfunction() { return module['default']; } :\n\t\tfunction() { return module; };\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","// define __esModule on exports\n__webpack_require__.r = function(exports) {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import \"./index.scss\"\r\nimport { useSelect } from \"@wordpress/data\"\r\nimport { useState, useEffect } from \"react\"\r\n\r\nconst __ = wp.i18n.__\r\n\r\nwp.blocks.registerBlockType(\"ourplugin/featured-professor\", {\r\n\ttitle: \"Professor Callout\",\r\n\tdescription:\r\n\t\t\"Include a short description and link to a professor of your choice\",\r\n\ticon: \"welcome-learn-more\",\r\n\tcategory: \"common\",\r\n\texample: {\r\n\t\tattributes: {\r\n\t\t\tprofId: 134,\r\n\t\t},\r\n\t},\r\n\tattributes: {\r\n\t\tprofId: { type: \"string\" },\r\n\t},\r\n\tedit: EditComponent,\r\n\tsave(props) {\r\n\t\treturn null\r\n\t},\r\n})\r\n\r\nfunction EditComponent({ attributes: { profId }, setAttributes }) {\r\n\tconst [thePreview, setThePreview] = useState(\"\")\r\n\tconst allProfessors = useSelect(select =>\r\n\t\tselect(\"core\").getEntityRecords(\"postType\", \"professor\", {\r\n\t\t\tper_page: -1,\r\n\t\t})\r\n\t)\r\n\r\n\tuseEffect(() => {\r\n\t\tif (profId) {\r\n\t\t\tupdateTheMeta()\r\n\t\t\tconst go = async () => {\r\n\t\t\t\tconst res = await findProf(\r\n\t\t\t\t\t\"/wp-json/featuredProfessor/v3/getHTML?profId=\" + profId\r\n\t\t\t\t)\r\n\t\t\t\tsetThePreview(res)\r\n\t\t\t}\r\n\t\t\tgo()\r\n\t\t}\r\n\t}, [profId])\r\n\r\n\tuseEffect(() => {\r\n\t\treturn () => {\r\n\t\t\tupdateTheMeta()\r\n\t\t}\r\n\t}, [])\r\n\r\n\tconst updateTheMeta = () => {\r\n\t\tconst featuredprofessor = wp.data\r\n\t\t\t.select(\"core/block-editor\")\r\n\t\t\t.getBlocks()\r\n\t\t\t.filter(block => block.name === \"ourplugin/featured-professor\")\r\n\t\t\t.map(block => block.attributes.profId)\r\n\t\t\t.filter((item, index, arr) => {\r\n\t\t\t\treturn arr.indexOf(item) === index\r\n\t\t\t})\r\n\t\twp.data\r\n\t\t\t.dispatch(\"core/editor\")\r\n\t\t\t.editPost({ meta: { featuredprofessor } })\r\n\t\tconsole.log(featuredprofessor)\r\n\t}\r\n\r\n\tconst handleChangeProfessor = e => setAttributes({ profId: e.target.value })\r\n\tconst renderProfessors =\r\n\t\tallProfessors &&\r\n\t\tallProfessors.map(prof => {\r\n\t\t\treturn (\r\n\t\t\t\t<option value={prof.id} selected={prof.id === +profId}>\r\n\t\t\t\t\t{prof.title.rendered}\r\n\t\t\t\t</option>\r\n\t\t\t)\r\n\t\t})\r\n\treturn (\r\n\t\t<div className=\"featured-professor-wrapper\">\r\n\t\t\t{renderProfessors ? (\r\n\t\t\t\t<div className=\"professor-select-container\">\r\n\t\t\t\t\t<select onChange={handleChangeProfessor}>\r\n\t\t\t\t\t\t<option value=\"\">\r\n\t\t\t\t\t\t\t{__(\"Select a professor\", \"featured-professor\")}\r\n\t\t\t\t\t\t</option>\r\n\t\t\t\t\t\t{renderProfessors}\r\n\t\t\t\t\t</select>\r\n\t\t\t\t</div>\r\n\t\t\t) : (\r\n\t\t\t\t\"Loading...\"\r\n\t\t\t)}\r\n\t\t\t<div dangerouslySetInnerHTML={{ __html: thePreview }}></div>\r\n\t\t</div>\r\n\t)\r\n}\r\nasync function findProf(url) {\r\n\tconst features = {\r\n\t\tmethod: \"get\",\r\n\t\theaders: {\r\n\t\t\tAccept: \"application/json\",\r\n\t\t\t\"Content-Type\": \"application/json\",\r\n\t\t},\r\n\t\tcredentials: \"same-origin\",\r\n\t}\r\n\tconst res = await fetch(featuredProfessorData.root_url + url, features)\r\n\tconst result = await res.json()\r\n\treturn result\r\n}\r\n"],"names":["useSelect","useState","useEffect","__","wp","i18n","blocks","registerBlockType","title","description","icon","category","example","attributes","profId","type","edit","EditComponent","save","props","setAttributes","thePreview","setThePreview","allProfessors","select","getEntityRecords","per_page","updateTheMeta","go","res","findProf","featuredprofessor","data","getBlocks","filter","block","name","map","item","index","arr","indexOf","dispatch","editPost","meta","console","log","handleChangeProfessor","e","target","value","renderProfessors","prof","createElement","id","selected","rendered","className","onChange","dangerouslySetInnerHTML","__html","url","features","method","headers","Accept","credentials","fetch","featuredProfessorData","root_url","result","json"],"sourceRoot":""}